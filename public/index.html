<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ryan's Suit ‚Äî ÁõëÊéß‰∏≠Êû¢ | Monitor Hub</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Syne:wght@400;700;800&display=swap');

  :root {
    --bg: #0a0a0f;
    --surface: #0f0f1a;
    --surface2: #141420;
    --border: #1e1e35;
    --accent: #00ff88;
    --accent2: #7c3aff;
    --warn: #ff6b35;
    --danger: #ff2d55;
    --muted: #3a3a5c;
    --text: #e8e8f0;
    --text2: #7878a0;
    --mono: 'JetBrains Mono', monospace;
    --sans: 'Syne', sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--mono);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,255,136,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,255,136,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px;
  }

  /* ‚îÄ‚îÄ‚îÄ Language Switcher ‚îÄ‚îÄ‚îÄ */
  .lang-switcher {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    display: flex;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
  }

  .lang-btn {
    padding: 8px 16px;
    background: transparent;
    border: none;
    color: var(--text2);
    font-family: var(--mono);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .lang-btn:hover {
    background: var(--surface2);
    color: var(--text);
  }

  .lang-btn.active {
    background: var(--accent);
    color: var(--bg);
    font-weight: 600;
  }

  /* Header */
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 32px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border);
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    animation: pulse-glow 3s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px rgba(0,255,136,0.3); }
    50% { box-shadow: 0 0 40px rgba(0,255,136,0.6), 0 0 80px rgba(0,255,136,0.2); }
  }

  .logo-text h1 {
    font-family: var(--sans);
    font-size: 18px;
    font-weight: 800;
    letter-spacing: -0.5px;
  }

  .logo-text span {
    font-size: 11px;
    color: var(--text2);
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .status-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
    border: 1px solid;
    transition: all 0.3s;
  }

  .status-badge.online {
    color: var(--accent);
    border-color: rgba(0,255,136,0.3);
    background: rgba(0,255,136,0.05);
  }

  .status-badge.offline {
    color: var(--danger);
    border-color: rgba(255,45,85,0.3);
    background: rgba(255,45,85,0.05);
  }

  .status-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: currentColor;
  }

  .status-badge.online .status-dot {
    animation: blink 1.5s ease-in-out infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .time-display {
    font-size: 12px;
    color: var(--text2);
    font-family: var(--mono);
  }

  /* Main Grid */
  .main-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 24px;
    margin-bottom: 24px;
  }

  @media (max-width: 1200px) {
    .main-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Cards */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
  }

  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .card-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
  }

  .card-title .icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    background: var(--surface2);
  }

  .card-actions {
    display: flex;
    gap: 8px;
  }

  .btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text2);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .btn-icon:hover {
    background: var(--surface2);
    color: var(--text);
  }

  /* Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 24px;
  }

  @media (max-width: 900px) {
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .stat-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 16px;
    position: relative;
    overflow: hidden;
  }

  .stat-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    opacity: 0.5;
  }

  .stat-label {
    font-size: 10px;
    color: var(--text2);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
  }

  .stat-value {
    font-size: 22px;
    font-weight: 700;
    color: var(--text);
    font-family: var(--mono);
  }

  .stat-change {
    font-size: 10px;
    margin-top: 4px;
  }

  .stat-change.up { color: var(--accent); }
  .stat-change.down { color: var(--danger); }

  /* Log Stream */
  .log-container {
    height: 400px;
    overflow-y: auto;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    font-size: 11px;
    line-height: 1.6;
  }

  .log-entry {
    display: flex;
    gap: 10px;
    padding: 4px 0;
    border-bottom: 1px solid rgba(255,255,255,0.03);
  }

  .log-time {
    color: var(--muted);
    white-space: nowrap;
  }

  .log-level {
    padding: 1px 6px;
    border-radius: 3px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .log-level.info { background: rgba(0,255,136,0.1); color: var(--accent); }
  .log-level.warn { background: rgba(255,107,53,0.1); color: var(--warn); }
  .log-level.error { background: rgba(255,45,85,0.1); color: var(--danger); }
  .log-level.tool { background: rgba(124,58,255,0.1); color: var(--accent2); }

  .log-source {
    color: var(--text2);
    min-width: 40px;
  }

  .log-msg {
    color: var(--text);
    word-break: break-all;
  }

  /* Tool Cards */
  .tool-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .tool-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .tool-item:hover {
    border-color: var(--accent);
    background: rgba(0,255,136,0.05);
  }

  .tool-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    background: var(--bg);
  }

  .tool-info {
    flex: 1;
  }

  .tool-name {
    font-size: 12px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 2px;
  }

  .tool-desc {
    font-size: 10px;
    color: var(--text2);
  }

  .tool-count {
    font-size: 11px;
    color: var(--accent);
    font-weight: 600;
  }

  /* Alerts */
  .alert-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .alert-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px;
    border-radius: 8px;
    border-left: 3px solid;
  }

  .alert-item.critical {
    background: rgba(255,45,85,0.1);
    border-color: var(--danger);
  }

  .alert-item.warning {
    background: rgba(255,107,53,0.1);
    border-color: var(--warn);
  }

  .alert-item.info {
    background: rgba(0,255,136,0.1);
    border-color: var(--accent);
  }

  .alert-icon {
    font-size: 14px;
  }

  .alert-content {
    flex: 1;
  }

  .alert-title {
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 2px;
  }

  .alert-desc {
    font-size: 10px;
    color: var(--text2);
  }

  .alert-time {
    font-size: 9px;
    color: var(--muted);
    white-space: nowrap;
  }

  /* Input Group */
  .input-group {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
  }

  .input-field {
    flex: 1;
    padding: 10px 14px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: var(--mono);
    font-size: 12px;
    outline: none;
    transition: all 0.2s;
  }

  .input-field:focus {
    border-color: var(--accent);
  }

  .input-field::placeholder {
    color: var(--muted);
  }

  .btn {
    padding: 10px 18px;
    border-radius: 8px;
    border: none;
    font-family: var(--mono);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .btn-primary {
    background: var(--accent);
    color: var(--bg);
  }

  .btn-primary:hover {
    box-shadow: 0 0 20px rgba(0,255,136,0.4);
  }

  .btn-secondary {
    background: var(--surface2);
    color: var(--text);
    border: 1px solid var(--border);
  }

  .btn-secondary:hover {
    background: var(--bg);
  }

  /* Footer */
  footer {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 11px;
    color: var(--text2);
  }

  footer a {
    color: var(--accent);
    text-decoration: none;
  }

  footer a:hover {
    text-decoration: underline;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: var(--surface);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--muted);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text2);
  }

  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card {
    animation: fadeIn 0.5s ease-out;
  }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 40px;
    color: var(--text2);
  }

  .empty-state .icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
  }

  .empty-state p {
    font-size: 12px;
  }
</style>
</head>
<body>
  <!-- Language Switcher -->
  <div class="lang-switcher">
    <button class="lang-btn active" data-lang="zh" onclick="setLang('zh')">‰∏≠Êñá</button>
    <button class="lang-btn" data-lang="en" onclick="setLang('en')">EN</button>
  </div>

  <div class="container">
    <!-- Header -->
    <header>
      <div class="logo">
        <div class="logo-icon">ü¶û</div>
        <div class="logo-text">
          <h1 data-i18n="title">Ryan's Suit</h1>
          <span data-i18n="subtitle">OpenClaw ¬∑ ÂÖ®Ê†àË∞ÉÁî®ÁõëÊéß‰∏≠Êû¢</span>
        </div>
      </div>
      <div class="header-right">
        <div class="status-badge offline" id="statusBadge">
          <span class="status-dot"></span>
          <span data-i18n="status">Á¶ªÁ∫ø</span>
        </div>
        <div class="time-display" id="timeDisplay">--:--:--</div>
      </div>
    </header>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-box">
        <div class="stat-label" data-i18n="stat.totalCalls">ÊÄªË∞ÉÁî®Ê¨°Êï∞</div>
        <div class="stat-value" id="totalCalls">0</div>
        <div class="stat-change up">+0%</div>
      </div>
      <div class="stat-box">
        <div class="stat-label" data-i18n="stat.tokens">Token Ê∂àËÄó</div>
        <div class="stat-value" id="tokenUsage">0</div>
        <div class="stat-change up">+0%</div>
      </div>
      <div class="stat-box">
        <div class="stat-label" data-i18n="stat.tools">Ê¥ªË∑ÉÂ∑•ÂÖ∑</div>
        <div class="stat-value" id="activeTools">0</div>
        <div class="stat-change">--</div>
      </div>
      <div class="stat-box">
        <div class="stat-label" data-i18n="stat.sessions">‰ºöËØùÊï∞</div>
        <div class="stat-value" id="sessionCount">0</div>
        <div class="stat-change up">+0%</div>
      </div>
    </div>

    <!-- Main Grid -->
    <div class="main-grid">
      <!-- Left: Logs -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span class="icon">üìú</span>
            <span data-i18n="logs.title">ÂÆûÊó∂Êìç‰ΩúÊó•Âøó</span>
          </div>
          <div class="card-actions">
            <button class="btn-icon" onclick="clearLogs()" title="Clear">üóëÔ∏è</button>
            <button class="btn-icon" onclick="togglePause()" id="pauseBtn" title="Pause">‚è∏Ô∏è</button>
          </div>
        </div>
        <div class="input-group">
          <input type="text" class="input-field" id="logPath" placeholder="Êó•ÂøóÊñá‰ª∂Ë∑ØÂæÑ" data-i18n-placeholder="logs.pathPlaceholder" />
          <button class="btn btn-primary" onclick="startMonitoring()" data-i18n="logs.start">ÂºÄÂßãÁõëÊéß</button>
        </div>
        <div class="log-container" id="logContainer">
          <div class="empty-state">
            <div class="icon">üì°</div>
            <p data-i18n="logs.empty">ËøûÊé• Gateway ÂêéÂºÄÂßãÊé•Êî∂Êó•Âøó</p>
          </div>
        </div>
      </div>

      <!-- Right: Tools & Alerts -->
      <div style="display: flex; flex-direction: column; gap: 24px;">
        <!-- Tools -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üõ†Ô∏è</span>
              <span data-i18n="tools.title">Â∑•ÂÖ∑Ë∞ÉÁî®ËÆ∞ÂΩï</span>
            </div>
          </div>
          <div class="tool-list" id="toolList">
            <div class="empty-state">
              <p data-i18n="tools.empty">Á≠âÂæÖÂ∑•ÂÖ∑Ë∞ÉÁî®</p>
            </div>
          </div>
        </div>

        <!-- Alerts -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">‚ö†Ô∏è</span>
              <span data-i18n="alerts.title">Á≥ªÁªüÁä∂ÊÄÅ & È¢ÑË≠¶</span>
            </div>
          </div>
          <div class="alert-list" id="alertList">
            <div class="alert-item info">
              <span class="alert-icon">‚ÑπÔ∏è</span>
              <div class="alert-content">
                <div class="alert-title" data-i18n="alerts.ready.title">Á≥ªÁªüÂ∞±Áª™</div>
                <div class="alert-desc" data-i18n="alerts.ready.desc">Á≠âÂæÖËøûÊé• Gateway</div>
              </div>
              <span class="alert-time">--:--</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <span data-i18n="footer.left">OpenClaw Monitor ¬∑ <a href="https://github.com/RyanMeg123/openclaw-monitor" target="_blank">GitHub</a></span>
      <span data-i18n="footer.right">Made with ü¶û by Ryan's Suit</span>
    </footer>
  </div>

  <script>
    // ‚îÄ‚îÄ‚îÄ i18n ÂõΩÈôÖÂåñ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const i18n = {
      zh: {
        title: "Ryan's Suit",
        subtitle: "OpenClaw ¬∑ ÂÖ®Ê†àË∞ÉÁî®ÁõëÊéß‰∏≠Êû¢",
        status: "Á¶ªÁ∫ø",
        "status.online": "Âú®Á∫ø",
        "status.offline": "Á¶ªÁ∫ø",
        "stat.totalCalls": "ÊÄªË∞ÉÁî®Ê¨°Êï∞",
        "stat.tokens": "Token Ê∂àËÄó",
        "stat.tools": "Ê¥ªË∑ÉÂ∑•ÂÖ∑",
        "stat.sessions": "‰ºöËØùÊï∞",
        "logs.title": "ÂÆûÊó∂Êìç‰ΩúÊó•Âøó",
        "logs.pathPlaceholder": "Êó•ÂøóÊñá‰ª∂Ë∑ØÂæÑ",
        "logs.start": "ÂºÄÂßãÁõëÊéß",
        "logs.stop": "ÂÅúÊ≠¢ÁõëÊéß",
        "logs.clear": "Ê∏ÖÁ©∫Êó•Âøó",
        "logs.pause": "ÊöÇÂÅú",
        "logs.resume": "ÁªßÁª≠",
        "logs.empty": "ËøûÊé• Gateway ÂêéÂºÄÂßãÊé•Êî∂Êó•Âøó",
        "tools.title": "Â∑•ÂÖ∑Ë∞ÉÁî®ËÆ∞ÂΩï",
        "tools.empty": "Á≠âÂæÖÂ∑•ÂÖ∑Ë∞ÉÁî®",
        "alerts.title": "Á≥ªÁªüÁä∂ÊÄÅ & È¢ÑË≠¶",
        "alerts.ready.title": "Á≥ªÁªüÂ∞±Áª™",
        "alerts.ready.desc": "Á≠âÂæÖËøûÊé• Gateway",
        "footer.left": "OpenClaw Monitor ¬∑ ",
        "footer.right": "Made with ü¶û by Ryan's Suit"
      },
      en: {
        title: "Ryan's Suit",
        subtitle: "OpenClaw ¬∑ Full-Stack Monitor Hub",
        status: "Offline",
        "status.online": "Online",
        "status.offline": "Offline",
        "stat.totalCalls": "Total Calls",
        "stat.tokens": "Token Usage",
        "stat.tools": "Active Tools",
        "stat.sessions": "Sessions",
        "logs.title": "Live Operation Logs",
        "logs.pathPlaceholder": "Log file path",
        "logs.start": "Start Monitoring",
        "logs.stop": "Stop Monitoring",
        "logs.clear": "Clear Logs",
        "logs.pause": "Pause",
        "logs.resume": "Resume",
        "logs.empty": "Connect Gateway to start receiving logs",
        "tools.title": "Tool Call Records",
        "tools.empty": "Waiting for tool calls",
        "alerts.title": "System Status & Alerts",
        "alerts.ready.title": "System Ready",
        "alerts.ready.desc": "Waiting for Gateway connection",
        "footer.left": "OpenClaw Monitor ¬∑ ",
        "footer.right": "Made with ü¶û by Ryan's Suit"
      }
    };

    let currentLang = localStorage.getItem('monitor-lang') || 'zh';

    function setLang(lang) {
      currentLang = lang;
      localStorage.setItem('monitor-lang', lang);
      document.documentElement.lang = lang;
      
      // Update buttons
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      
      // Update all i18n elements
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (i18n[lang][key]) {
          el.textContent = i18n[lang][key];
        }
      });
      
      // Update placeholders
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.dataset.i18nPlaceholder;
        if (i18n[lang][key]) {
          el.placeholder = i18n[lang][key];
        }
      });
    }

    // Initialize
    setLang(currentLang);

    // ‚îÄ‚îÄ‚îÄ ÂéüÊúâÂäüËÉΩ‰ª£Á†Å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    
    let isMonitoring = false;
    let isPaused = false;
    let logInterval = null;
    let totalCalls = 0;
    let toolCalls = {};

    function updateTime() {
      const now = new Date();
      document.getElementById('timeDisplay').textContent = now.toLocaleTimeString('zh-CN', { hour12: false });
    }
    setInterval(updateTime, 1000);
    updateTime();

    function startMonitoring() {
      const path = document.getElementById('logPath').value;
      if (!path) {
        addAlert('warning', i18n[currentLang]['alerts.ready.title'], 'Please enter log file path');
        return;
      }
      
      isMonitoring = true;
      document.getElementById('statusBadge').className = 'status-badge online';
      document.getElementById('statusBadge').querySelector('span:last-child').textContent = i18n[currentLang]['status.online'];
      
      // Clear empty state
      document.getElementById('logContainer').innerHTML = '';
      
      // Simulate log stream
      addLog('info', 'system', 'SYS', i18n[currentLang]['logs.empty']);
      
      logInterval = setInterval(() => {
        if (!isPaused) {
          simulateLogEntry();
        }
      }, 2000);
    }

    function stopMonitoring() {
      isMonitoring = false;
      document.getElementById('statusBadge').className = 'status-badge offline';
      document.getElementById('statusBadge').querySelector('span:last-child').textContent = i18n[currentLang]['status.offline'];
      if (logInterval) {
        clearInterval(logInterval);
        logInterval = null;
      }
    }

    function togglePause() {
      isPaused = !isPaused;
      document.getElementById('pauseBtn').textContent = isPaused ? '‚ñ∂Ô∏è' : '‚è∏Ô∏è';
      document.getElementById('pauseBtn').title = isPaused ? i18n[currentLang]['logs.resume'] : i18n[currentLang]['logs.pause'];
    }

    function clearLogs() {
      document.getElementById('logContainer').innerHTML = `
        <div class="empty-state">
          <div class="icon">üì°</div>
          <p>${i18n[currentLang]['logs.empty']}</p>
        </div>
      `;
    }

    function addLog(level, source, prefix, message) {
      const container = document.getElementById('logContainer');
      const time = new Date().toLocaleTimeString('zh-CN', { hour12: false });
      
      // Remove empty state if exists
      if (container.querySelector('.empty-state')) {
        container.innerHTML = '';
      }
      
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      entry.innerHTML = `
        <span class="log-time">${time}</span>
        <span class="log-level ${level}">${prefix}</span>
        <span class="log-source">${source}</span>
        <span class="log-msg">${message}</span>
      `;
      
      container.appendChild(entry);
      container.scrollTop = container.scrollHeight;
      
      // Update stats
      if (level === 'tool') {
        totalCalls++;
        document.getElementById('totalCalls').textContent = totalCalls;
        updateToolList(source);
      }
    }

    function updateToolList(toolName) {
      toolCalls[toolName] = (toolCalls[toolName] || 0) + 1;
      
      const toolList = document.getElementById('toolList');
      if (toolList.querySelector('.empty-state')) {
        toolList.innerHTML = '';
      }
      
      // Check if tool already exists
      let existing = toolList.querySelector(`[data-tool="${toolName}"]`);
      if (existing) {
        existing.querySelector('.tool-count').textContent = toolCalls[toolName];
      } else {
        const toolItem = document.createElement('div');
        toolItem.className = 'tool-item';
        toolItem.dataset.tool = toolName;
        toolItem.innerHTML = `
          <div class="tool-icon">üîß</div>
          <div class="tool-info">
            <div class="tool-name">${toolName}</div>
            <div class="tool-desc">Tool call</div>
          </div>
          <div class="tool-count">${toolCalls[toolName]}</div>
        `;
        toolList.appendChild(toolItem);
      }
      
      document.getElementById('activeTools').textContent = Object.keys(toolCalls).length;
    }

    function addAlert(level, title, desc) {
      const alertList = document.getElementById('alertList');
      const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
      
      const icons = { critical: 'üî¥', warning: 'üü°', info: 'üîµ' };
      
      const alert = document.createElement('div');
      alert.className = `alert-item ${level}`;
      alert.innerHTML = `
        <span class="alert-icon">${icons[level]}</span>
        <div class="alert-content">
          <div class="alert-title">${title}</div>
          <div class="alert-desc">${desc}</div>
        </div>
        <span class="alert-time">${time}</span>
      `;
      
      alertList.insertBefore(alert, alertList.firstChild);
      
      // Keep only last 5 alerts
      while (alertList.children.length > 5) {
        alertList.removeChild(alertList.lastChild);
      }
    }

    function simulateLogEntry() {
      const tools = ['tavily_search', 'exec', 'read', 'write', 'browser'];
      const levels = ['info', 'info', 'info', 'tool', 'info'];
      const messages = [
        'Searching web for latest AI news',
        'Executing command: ls -la',
        'Reading file: README.md',
        'Writing to config.json',
        'Fetching page content'
      ];
      
      const idx = Math.floor(Math.random() * tools.length);
      const level = levels[idx];
      const tool = tools[idx];
      const msg = messages[idx];
      
      addLog(level, level === 'tool' ? tool : 'gateway', level === 'tool' ? 'TOOL' : 'INFO', msg);
    }

    // Demo mode - auto start after 2 seconds
    setTimeout(() => {
      document.getElementById('logPath').value = '~/.openclaw/logs/gateway.log';
    }, 500);
  </script>
</body>
</html>